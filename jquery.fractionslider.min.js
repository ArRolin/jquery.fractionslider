/*
 * jQuery Fraction Slider v0.7.3
 * http://fractionslider.jacksbox.de
 *
 * Author: Mario JÃ¤ckle
 * eMail: support@jacksbopx.de
 *
 * Copyright 2013, jacksbox.design
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(e){var t=function(t,n){function h(){o.addClass("fraction-slider");if(n["controls"]){o.append('<a href="#" class="prev"></a><a href="#" class="next" ></a>');o.find(".next").bind("click",function(){return v()});o.find(".prev").bind("click",function(){return d()})}if(n["pager"]){u=e('<div class="fs-pager-wrapper"></div>');o.append(u)}if(n["fullWidth"]){o.css({overflow:"visible"})}else{o.css({overflow:"hidden"})}o.children(".slide").each(function(t){var r=e(this);r.children().attr("rel",t).addClass("fs_obj");if(n["pager"]){u.append('<a rel="'+t+'" href="#"></a>')}});if(n["pager"]){u=e(u).children("a");u.bind("click",function(){return p(this)})}g()}function p(t){if(r.controlsActive){r.controlsActive=false;m();o.find(".slide *").stop(true,true);b(r.currentSlide);r.currentSlide=e(t).attr("rel");r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;y()}return false}function d(){if(r.controlsActive){r.controlsActive=false;m();o.find(".slide *").stop(true,true);b(r.currentSlide);r.currentSlide--;r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;if(r.currentSlide<0){r.currentSlide=r.maxSlide}y()}return false}function v(){if(r.controlsActive){r.controlsActive=false;m();o.find(".slide *").stop(true,true);b(r.currentSlide);r.currentSlide++;r.currentStep=0;r.maxStep=0;r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;if(r.currentSlide>r.maxSlide){r.currentSlide=0}y()}return false}function m(){var t=i.length;e.each(i,function(e){clearTimeout(this);if(e==t-1){i=[]}})}function g(){if(r.init){var e=0;r.init=false}else{var e=n["timeout"];r.init=false}i.push(setTimeout(function(){if(r.maxSlide==0&&r.running==true){}else{b(r.currentSlide-1);y();r.running=true}},e))}function y(){if(n["pager"]){u.removeClass("active");u.eq(r.currentSlide).addClass("active")}if(n["backgroundAnimation"]){C()}var e=o.children(".slide:eq("+r.currentSlide+")");if(e.length==0){r.currentSlide=0;e=o.children(".slide:eq("+r.currentSlide+")")}w();e.css({display:"block"});e.children().hide();r.currentObj=0;r.maxObjs=0;r.finishedObjs=0;E()}function b(t){if(t<0){return}var i=o.children(".slide:eq("+t+")");var s=i.children();s.each(function(){var t=e(this);var r=t.position();var i=t.attr("data-out");var s=t.attr("data-ease-out");if(i==null){i=n["transitionOut"]}if(s==null){s=n["easeOut"]}N(t,r,i,s)}).promise().done(function(){i.hide();r.controlsActive=true})}function w(){var t=o.children(".slide:eq("+r.currentSlide+")").children();var n=0;t.each(function(){var t=parseFloat(e(this).attr("data-step"));n=t>n?t:n});r.maxStep=n}function E(){if(r.currentStep==0){var e=o.children(".slide:eq("+r.currentSlide+")").children('*:not([data-step]), *[data-step="'+r.currentStep+'"]')}else{var e=o.children(".slide:eq("+r.currentSlide+")").children('*[data-step="'+r.currentStep+'"]')}r.maxObjs=e.length;s=e;if(r.maxObjs>0){r.currentObj=0;r.finishedObjs=0;S()}else{o.trigger("fraction:stepFinished")}}function S(){var t=e(s[r.currentObj]);var i=t.attr("data-position").split(",");var o=t.attr("data-in");var u=t.attr("data-delay");var a=t.attr("data-speed");var f=t.attr("data-ease-in");var l=t.attr("data-special");if(i==null){i=n["position"].split(",")}if(o==null){o=n["transitionIn"]}if(u==null){u=n["delay"]}if(f==null){f=n["easeIn"]}T(t,i,o,u,a,f,l);r.currentObj++;if(r.currentObj<r.maxObjs){S()}else{r.currentObj=0}}function x(e){if(e.attr("rel")==r.currentSlide){r.finishedObjs++;if(r.finishedObjs==r.maxObjs){o.trigger("fraction:stepFinished")}}}function T(t,s,o,u,f,h,p){var d=null;var v=null;var m=null;var g=null;switch(o){case"left":d=s[0];v=a;break;case"bottomLeft":d=c;v=a;break;case"topLeft":d=t.outerHeight()*-1;v=a;break;case"top":d=t.outerHeight()*-1;v=s[1];break;case"bottom":d=c;v=s[1];break;case"right":d=s[0];v=0-l-t.outerWidth();break;case"bottomRight":d=c;v=0-l-t.outerWidth();break;case"topRight":d=t.outerHeight()*-1;v=0-l-t.outerWidth();break}m=s[0];g=s[1];if(f==null){f=n["speedIn"]}else{f=parseInt(f)}i.push(setTimeout(function(){if(p=="cycle"&&t.attr("rel")==r.currentSlide){var i=t.prev();if(i.length>0){var s=e(i).attr("data-position").split(",");s={top:s[0],left:s[1]};var u=e(i).attr("data-out");if(u==null){u=n["transitionOut"]}N(i,s,u,f)}}if(o=="fade"){t.css({top:m+"px",left:g+"px"}).fadeIn(f,function(){x(t)}).addClass("fs_obj_active")}else if(o=="none"){t.css({top:m+"px",left:g+"px"}).show(0,function(){x(t)}).addClass("fs_obj_active")}else{t.css({top:d+"px",left:v+"px"}).show().animate({top:m+"px",left:g+"px"},f,h,function(){x(t)}).addClass("fs_obj_active")}},u))}function N(e,t,r,i,s){var o=null;var u=null;switch(r){case"left":o=t["top"];u=0-l-100-e.outerWidth();break;case"bottomLeft":o=c;u=0-l-100-e.outerWidth();break;case"topLeft":o=e.outerHeight()*-1;u=0-l-100-e.outerWidth();break;case"top":o=e.outerHeight()*-1;u=t["left"];break;case"bottom":o=c;u=t["left"];break;case"right":o=t["top"];u=a;break;case"bottomRight":o=c;u=a;break;case"topRight":o=e.outerHeight()*-1;u=a;break;default:break}if(i==null&&r!="fade"||i==null&&r!="none"){if(t["left"]>u){distX=Math.abs(t["left"]-u)}else if(t["left"]>u){distX=Math.abs(u-t["left"])}else{distX=0}if(t["top"]>o){distY=Math.abs(t["top"]-o)}else if(o>t["top"]){distY=Math.abs(o-t["top"])}else{distY=0}dist=Math.sqrt(distX*distX+distY*distY);i=dist*(n["speedOut"]/1e3)}else if(i!=null){}else{i=n["speedOut"]}if(r=="fade"){e.fadeOut(i,function(){e.hide()}).removeClass("fs_obj_active")}else if(r=="none"){e.hide(0,function(){e.hide()}).removeClass("fs_obj_active")}else{e.animate({top:o+"px",left:u+"px"},i,s,function(){e.hide()}).removeClass("fs_obj_active")}}function C(){if(n["backgroundElement"]==null||n["backgroundElement"]==""){var t=o}else{var t=e(n["backgroundElement"])}var r=t.css("background-position");r=r.split(" ");var i=n["backgroundX"];var s=n["backgroundY"];var u=Number(r[0].replace(/[px,%]/g,""))+i;var a=Number(r[1].replace(/[px,%]/g,""))+s;t.animate({backgroundPositionX:u+"px",backgroundPositionY:a+"px"},n["backgroundSpeed"],n["backgroundEase"])}var r={init:true,running:false,controlsActive:true,currentSlide:0,maxSlide:0,currentStep:0,maxStep:0,currentObj:0,maxObjs:0,finishedObjs:0};var i=[];var s=null;var o=e(t),u=null;r.maxSlide=o.children(".slide").length-1;var a=o.width();var f=e("body").width();var l=(f-a)/2;if(n["fullWidth"]){a=f}var c=o.height();h();o.bind("fraction:stepFinished",function(){r.currentStep++;if(r.currentStep>r.maxStep){if(n["autoChange"]){r.currentSlide++;r.currentStep=0;g()}return}E()})};e.fn.fractionSlider=function(n){var n=e.extend({position:"0,0",transitionIn:"left",transitionOut:"left",fullWidth:false,delay:0,timeout:2e3,speedIn:2500,speedOut:1e3,easeIn:"easeOutExpo",easeOut:"easeOutCubic",controls:false,pager:false,autoChange:true,backgroundAnimation:false,backgroundElement:null,backgroundX:500,backgroundY:500,backgroundSpeed:2500,backgroundEase:"easeOutCubic"},n);var r=new t(this,n)};var n={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){n[t]=function(t){return Math.pow(t,e+2)}});e.extend(n,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11){}return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}});e.each(n,function(t,n){e.easing["easeIn"+t]=n;e.easing["easeOut"+t]=function(e){return 1-n(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})})(jQuery)